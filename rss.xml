<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Noodles Blog</title>
        <link>https://noodles.nz</link>
        <description>Noodles Blog</description>
        <lastBuildDate>Tue, 07 Jan 2020 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Yarn audit fix]]></title>
            <link>https://noodles.nz/2020/01/07/yarn-audit-fix</link>
            <guid>https://noodles.nz/2020/01/07/yarn-audit-fix</guid>
            <pubDate>Tue, 07 Jan 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Yarn doesn't have the ability to fix the problems it finds in a security audit (like npm does). There is a workaround that I found on a github thread though:]]></description>
            <content:encoded><![CDATA[<p>Yarn doesn't have the ability to fix the problems it finds in a security audit (like npm does). There is a workaround that I found on a github thread though:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm audit fix --force # breaking changes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm yarn.lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn import</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn audit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm package-lock.json</span><br></span></code></pre></div></div>
<p>It's not pretty but it does the job.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Fixing Twig deprecations in Symfony 4.4]]></title>
            <link>https://noodles.nz/2019/11/27/fixing-twig-deprecations-in-symfony-4-4</link>
            <guid>https://noodles.nz/2019/11/27/fixing-twig-deprecations-in-symfony-4-4</guid>
            <pubDate>Wed, 27 Nov 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[I recently update to Symfony 4.4 and had to work through a few deprecations. Some were straight forward, some were not. This Twig one was not:]]></description>
            <content:encoded><![CDATA[<p>I recently update to Symfony 4.4 and had to work through a few deprecations. Some were straight forward, some were not. This Twig one was not:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">The "twig.exception_controller" configuration key has been deprecated in Symfony 4.4, set it to "null" and use "framework.error_controller" configuration key instead.</span><br></span></code></pre></div></div>
<p>This was resolved by adding the following to config/packages/twig.yaml:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">exception_controller: null</span><br></span></code></pre></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Running Akamai Sandbox in Docker with HTTPS]]></title>
            <link>https://noodles.nz/2018/10/12/running-akamai-sandbox-in-docker-with-https</link>
            <guid>https://noodles.nz/2018/10/12/running-akamai-sandbox-in-docker-with-https</guid>
            <pubDate>Fri, 12 Oct 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[Akamai's new Sandbox can be run on local development environments, so you can test changes in development with production like CDN settings. This allows you to more quickly identify issues before rolling out to production.]]></description>
            <content:encoded><![CDATA[<p>Akamai's new Sandbox can be run on local development environments, so you can test changes in development with production like CDN settings. This allows you to more quickly identify issues before rolling out to production.</p>
<!-- -->
<p>The Akamai sandbox (or DevPoPs) is a Java app (see <a href="https://bit.ly/aka-sb-gh" target="_blank" rel="noopener noreferrer">https://bit.ly/aka-sb-gh</a>). This Java app can be containerised for portability/ease of setup and use.</p>
<p>I created a simple docker compose setup (<a href="https://github.com/NoodlesNZ/devpops-test" target="_blank" rel="noopener noreferrer">https://github.com/NoodlesNZ/devpops-test</a>).</p>
<p>This can be used with a real certificate (which is signed by a CA), but works as well with a self signed certificate using (on a Mac):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl req \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -newkey rsa:2048 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -x509 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -nodes \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -keyout server.key \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -new \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -out server.crt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -subj /CN=www.example.com \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -reqexts SAN \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -extensions SAN \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -config &lt;(cat /System/Library/OpenSSL/openssl.cnf \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;(printf '[SAN]\nsubjectAltName=DNS:www.example.com')) \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -sha256 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -days 3650</span><br></span></code></pre></div></div>
<p>This is included in the conf/config.json file:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "connectorServerInfo": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "secure": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "port": 443,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "host": "0.0.0.0",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "cert": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "certChainPath": "./conf/server.crt",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "keyPath": "./conf/server.key"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "originMappings": [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "from": "&lt;ORIGIN HOST&gt;",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "to": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "secure": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "port": 8443,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "host": "host.docker.internal"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "jwt": "&lt;ENTER JWT HERE&gt;"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Explaining a few options in the config.json file.</p>
<p>In the connectorServerInfo section:</p>
<ul>
<li>secure: true - enables https</li>
<li>port: 443 - listens on port 443</li>
<li>host: 0.0.0.0 - bind to all ip addresses (needed for docker as binding to 127.0.0.1 doesn't work)</li>
<li>cert - public/private key as generated with openssl</li>
</ul>
<p>In the originMappings section:</p>
<ul>
<li>from: <code>&lt;ORIGIN HOST&gt;</code> - the origin hostname in your Akamai property, e.g. origin.example.com</li>
<li>to - the local/development origin</li>
<li>secure: true - enabled https on the new origin</li>
<li>port: 8443 - As the Sandbox is now listening on port 443, the origin needs to be on a different port</li>
<li>host: host.docker.internal - special docker hostname on mac, which resolves to the host's ip address. This assumes that your dev server is also hosted on your mac.</li>
</ul>
<p>This setup can also be incorporated into an existing docker compose setup, e.g.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">version: '2'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  web:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: example/web:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - appnet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  devpops:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: noodlesnz/devpops:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./conf:/opt/devpops/conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - 443:443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - appnet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  appnet:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    driver: "bridge"</span><br></span></code></pre></div></div>
<p>With web and devpops sharing the same docker network, you can use the host "web" with your config.json, e.g.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "connectorServerInfo": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "secure": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "port": 443,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "host": "0.0.0.0",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "cert": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "certChainPath": "./conf/server.crt",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "keyPath": "./conf/server.key"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "originMappings": [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "from": "&lt;ORIGIN HOST&gt;",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "to": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "secure": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "port": 443,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "host": "web"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "jwt": "&lt;ENTER JWT HERE&gt;"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>This also means that the development origin can only be accessed through the Akamai Sandbox, as web doesn't have any ports exposed.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ipv6 workaround for Unifi USG on 2 Degrees UFB]]></title>
            <link>https://noodles.nz/2018/09/20/ipv6-workaround-for-unifi-usg-on-2-degrees-ufb</link>
            <guid>https://noodles.nz/2018/09/20/ipv6-workaround-for-unifi-usg-on-2-degrees-ufb</guid>
            <pubDate>Thu, 20 Sep 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[I had an issue where our USG Pro was not getting ipv6 from 2 Degrees UFB after upgrading our Controller to 5.8. After a lot of messing around with this, I found a workaround originally posted here//community.ubnt.com/t5/UniFi-Routing-Switching/USG-DHCPv6-PD-bug-when-using-PPPoE/td-p/2487710.]]></description>
            <content:encoded><![CDATA[<p>I had an issue where our USG Pro was not getting ipv6 from 2 Degrees UFB after upgrading our Controller to 5.8. After a lot of messing around with this, I found a workaround originally posted here: <a href="https://community.ubnt.com/t5/UniFi-Routing-Switching/USG-DHCPv6-PD-bug-when-using-PPPoE/td-p/2487710" target="_blank" rel="noopener noreferrer">https://community.ubnt.com/t5/UniFi-Routing-Switching/USG-DHCPv6-PD-bug-when-using-PPPoE/td-p/2487710</a>.</p>
<!-- -->
<p>Digging into the dhcpv6-pd logs shows this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">admin@SecurityGateway:~$ show dhcpv6-pd log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sep/12/2018 08:14:08: dhcp6_ctl_init: bind(control sock): Address already in use</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sep/12/2018 08:14:08: client6_init: failed to initialize control channel</span><br></span></code></pre></div></div>
<p>Dumping out the config I saw that I had two dhcpv6-pd blocks, one under interface eth2 vif 10 and the other under interface eth2 vif 10 pppoe 2 (where it should be):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mca-ctrl -t dump-cfg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"eth2": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "description": "WAN",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "vif": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "10": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    "description": "WAN",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    "dhcpv6-pd": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            "pd": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    "0": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            "interface": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                    "eth0": "''"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            "prefix-length": "56"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            "rapid-commit": "enable"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    "firewall": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            "in": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    "ipv6-name": "WANv6_IN",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    "name": "WAN_IN"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            "local": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    "ipv6-name": "WANv6_LOCAL",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    "name": "WAN_LOCAL"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            "out": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    "ipv6-name": "WANv6_OUT",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    "name": "WAN_OUT"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    "pppoe": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            "2": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    "default-route": "none",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    "dhcpv6-pd": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            "pd": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                    "0": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                            "interface": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                    "eth0": "''"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                            "prefix-length": "56"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            "rapid-commit": "enable"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    "firewall": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            "in": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                    "ipv6-name": "WANv6_IN",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                    "name": "WAN_IN"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            "local": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                    "ipv6-name": "WANv6_LOCAL",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                    "name": "WAN_LOCAL"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            "out": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                    "ipv6-name": "WANv6_OUT",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                    "name": "WAN_OUT"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    "ipv6": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            "address": "autoconf",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            "enable": "''"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    "name-server": "none",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    "password": "&lt;password&gt;",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    "user-id": "&lt;username&gt;"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>It was possible to temporarily fix this issue by removing the first block:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">configure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delete interfaces ethernet eth2 vif 10 dhcpv6-pd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">commit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">release dhcpv6-pd interface pppoe2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delete dhcpv6-pd duid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">renew dhcpv6-pd interface pppoe2</span><br></span></code></pre></div></div>
<p>This allowed our USG to get ipv6 from our ISP and now all the clients on the network also got ipv6.</p>
<p>To make this more permanent I had to add this file on the USG under <code>/config/scripts/post-config.d/dhcp.sh</code></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/vbash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">readonly logFile="/var/log/postprovision.log"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source /opt/vyatta/etc/functions/script-template</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">configure &gt; ${logFile}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delete system task-scheduler task postprovision &gt;&gt; ${logFile}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delete interfaces ethernet eth2 vif 10 dhcpv6-pd &gt;&gt; ${logFile}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">commit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">release dhcpv6-pd interface pppoe2 &gt;&gt; ${logFile}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delete dhcpv6-pd duid  &gt;&gt; ${logFile}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">renew dhcpv6-pd interface pppoe2 &gt;&gt; ${logFile}</span><br></span></code></pre></div></div>
<p>To run this script, I added the following on the Controller in <code>/usr/lib/unifi/data/sites/default/config.gateway.json</code>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "system":{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "task-scheduler":{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "task":{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "postprovision":{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    "executable":{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        "path":"/config/scripts/post-config.d/dhcp.sh"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    "interval":"2m"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>This runs the dhcp.sh script 2 minutes after provisioning and then the script removes the scheduled task (as it only needs to run once).</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Speed up Jenkins phpcs (PHP CodeSniffer)]]></title>
            <link>https://noodles.nz/2015/07/08/speed-up-jenkins-phpcs-php-codesniffer</link>
            <guid>https://noodles.nz/2015/07/08/speed-up-jenkins-phpcs-php-codesniffer</guid>
            <pubDate>Wed, 08 Jul 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[PHP CodeSniffer in our Jenkins CI was always one of the slowest tasks as it ran across our whole code base. LB Denker from Etsy wrote a good piece of software called CSRunner which looked to solve this problem by only running phpcs on files that had changed in the last 7 days (or so). It is written as a PHP script that was run from Jenkins.]]></description>
            <content:encoded><![CDATA[<p>PHP CodeSniffer in our Jenkins CI was always one of the slowest tasks as it ran across our whole code base. LB Denker from Etsy wrote a good piece of software called <a href="https://github.com/elblinkin/CSRunner" target="_blank" rel="noopener noreferrer">CSRunner</a> which looked to solve this problem by only running phpcs on files that had changed in the last 7 days (or so). It is written as a PHP script that was run from Jenkins.</p>
<p>I took this idea and adapted it to run in Ant. Instead of looking at files changed in x days, it looks at the checkstyle report from the last run and gets a list of files with problems. It merges this with any files that have changed since the last build. In theory it should bring the run time down (assuming you have a low number of files with problems).</p>
<p><a href="https://gist.github.com/NoodlesNZ/ea5ab91c03f4dfb13ca0" target="_blank" rel="noopener noreferrer">build.xml</a></p>
<p>I'm open to any ideas on how to improve this as I'm not that experienced with Ant.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Show MySQL engine tablespace size]]></title>
            <link>https://noodles.nz/2014/10/22/show-mysql-engine-tablespace-size</link>
            <guid>https://noodles.nz/2014/10/22/show-mysql-engine-tablespace-size</guid>
            <pubDate>Wed, 22 Oct 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[I have been trying to migrate everything in MySQL to use INNODB (death to all MyISAM), but was unsure of how much data was being stored in each storage engine. You can use the following query to give a total usage for all engines:]]></description>
            <content:encoded><![CDATA[<p>I have been trying to migrate everything in MySQL to use INNODB (death to all MyISAM), but was unsure of how much data was being stored in each storage engine. You can use the following query to give a total usage for all engines:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT ENGINE, CONCAT(FORMAT(RIBPS/POWER(1024,pw),2),SUBSTR(' KMGT',pw+1,1)) `Usage` FROM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SELECT ENGINE,RIBPS,FLOOR(LOG(RIBPS)/LOG(1024)) pw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FROM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SELECT ENGINE, SUM(data_length+index_length) RIBPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		FROM information_schema.tables AAA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		GROUP BY ENGINE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		HAVING RIBPS != 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ) AA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) A;</span><br></span></code></pre></div></div>
<p>Now I have that information I can adjust my INNODB buffers and reduce MyISAM caches</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Speeding up percona xtrabackup restores]]></title>
            <link>https://noodles.nz/2014/10/10/speeding-up-percona-xtrabackup-restores</link>
            <guid>https://noodles.nz/2014/10/10/speeding-up-percona-xtrabackup-restores</guid>
            <pubDate>Fri, 10 Oct 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[I started playing around with using xtrabackup (or more specifically innobackupex) to backup MySQL. Most of our tables are now innodb so it didn't make sense to keep dumping everything out via mysqldump.]]></description>
            <content:encoded><![CDATA[<p>I started playing around with using xtrabackup (or more specifically innobackupex) to backup MySQL. Most of our tables are now innodb so it didn't make sense to keep dumping everything out via mysqldump.</p>
<p>I had a clone of our master db server in our virtual environment that I was trying to restore the backup onto, but it was taking hours (using <code>innobackupex -copy-back /backup/</code>). I figured that the IO on my virtual servers was just crap and I'd have to grin and bear it. There doesn't seem to be much around about restoring using innobackupex, even the command options are limited for restores so I thought <code>-copy-back</code> was the only way.</p>
<p>It seems that if your backup is on the same filesystem as where it's going to end up then it's a lot faster to use the <code>-move-back</code> option. This changed my restore time from hours to seconds.</p>
<p>e.g.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">innobackupex -move-back /backup/</span><br></span></code></pre></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[SSL by default]]></title>
            <link>https://noodles.nz/2014/08/15/ssl-by-default</link>
            <guid>https://noodles.nz/2014/08/15/ssl-by-default</guid>
            <pubDate>Fri, 15 Aug 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[All the cool kids are doing it, so I'm playing around with enabling SSL by default with HSTS. Thanks to CloudFlare and StartSSL it's been mostly without a hiccup.]]></description>
            <content:encoded><![CDATA[<p>All the cool kids are doing it, so I'm playing around with enabling SSL by default with HSTS. Thanks to CloudFlare and StartSSL it's been mostly without a hiccup.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Validator.nu RPM]]></title>
            <link>https://noodles.nz/2014/03/10/validator-nu-rpm</link>
            <guid>https://noodles.nz/2014/03/10/validator-nu-rpm</guid>
            <pubDate>Mon, 10 Mar 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[I've been playing around with validator.nu the last few days. I have been trying to get a standalone version working so I could package it up and puppetize it. Unfortunately a lot of the standalone jar builders failed (java hell).]]></description>
            <content:encoded><![CDATA[<p>I've been playing around with validator.nu the last few days. I have been trying to get a standalone version working so I could package it up and puppetize it. Unfortunately a lot of the standalone jar builders failed (java hell).</p>
<p>I finally found that it's been released here: <a href="https://github.com/validator/validator.github.io" target="_blank" rel="noopener noreferrer">https://github.com/validator/validator.github.io</a></p>
<p>I whipped up a basic rpm to use this and install an init script etc: <a href="https://github.com/NoodlesNZ/validator-nu-rpm" target="_blank" rel="noopener noreferrer">https://github.com/NoodlesNZ/validator-nu-rpm</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[IPv6 in NZ]]></title>
            <link>https://noodles.nz/2014/01/06/ipv6-in-nz</link>
            <guid>https://noodles.nz/2014/01/06/ipv6-in-nz</guid>
            <pubDate>Mon, 06 Jan 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[I just a quick survey of the top 500 sites in NZ (based on Alexa data) and I was disappointed to see that only two NZ based sites (excluding Google, Microsoft, Facebook etc) supported IPv6, geekzone.co.nz and nzsale.co.nz (Geekzone implemented its IPv6 via Cloudflare and NZ Sale through Akamai).]]></description>
            <content:encoded><![CDATA[<p>I just a quick survey of the top 500 sites in NZ (based on Alexa data) and I was disappointed to see that only two NZ based sites (excluding Google, Microsoft, Facebook etc) supported IPv6, <a href="https://www.geekzone.co.nz/" target="_blank" rel="noopener noreferrer">geekzone.co.nz</a> and <a href="https://www.nzsale.co.nz/" target="_blank" rel="noopener noreferrer">nzsale.co.nz</a> (Geekzone implemented its IPv6 via Cloudflare and NZ Sale through Akamai).</p>
<p>Come on people, it's 2014. There's no excuse not to support IPv6, especially with two RIRs on their last /8 and APNIC with ~13.5 million addresses remaining. What's really worrying is that some of the major ISPS (Telecom, Vodafone, Orcon) don't even have IPv6 on their public facing websites. I'd guess that their residential customers won't be seeing IPv6 on their connections anytime soon and that CGN is a real possibility.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Another day, another vBulletin code error]]></title>
            <link>https://noodles.nz/2013/12/16/another-day-another-vbulletin-code-error</link>
            <guid>https://noodles.nz/2013/12/16/another-day-another-vbulletin-code-error</guid>
            <pubDate>Mon, 16 Dec 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[It seems that vBulletin doesn't test on PHP 5.4 or 5.5 these days. Either that or they're happy to just suppress errors rather than actually fix them.]]></description>
            <content:encoded><![CDATA[<p>It seems that vBulletin doesn't test on PHP 5.4 or 5.5 these days. Either that or they're happy to just suppress errors rather than actually fix them.</p>
<p>I upgraded my forum today to vBulletin 4.2.2 and noticed these errors on a search page:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Warning: Declaration of vBForum_Item_SocialGroupMessage::getLoadQuery() should be compatible with vB_Model::getLoadQuery($required_query = ”, $force_rebuild = false) in …./packages/vbforum/item/socialgroupmessage.php on line 261</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Warning: Declaration of vBForum_Item_SocialGroupDiscussion::getLoadQuery() should be compatible with vB_Model::getLoadQuery($required_query = ”, $force_rebuild = false) in …./packages/vbforum/item/socialgroupdiscussion.php on line 337 </span><br></span></code></pre></div></div>
<p>Luckily a user on vbulletin.com support forum has a fix: <a href="http://www.vbulletin.com/forum/forum/vbulletin-4/vbulletin-4-questions-problems-and-troubleshooting/4000233-warning-declaration-of-vbforum_item_socialgroupmessage?p=4000793#post4000793" target="_blank" rel="noopener noreferrer">http://www.vbulletin.com/forum/forum/vbulletin-4/vbulletin-4-questions-problems-and-troubleshooting/4000233-warning-declaration-of-vbforum_item_socialgroupmessage?p=4000793#post4000793</a></p>
<p>What annoys me is that vBulletin released this version a while ago, but are still distributing it with this code error.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GPT Passback tags and validation errors]]></title>
            <link>https://noodles.nz/2013/12/16/gpt-passback-tags-and-validation-errors</link>
            <guid>https://noodles.nz/2013/12/16/gpt-passback-tags-and-validation-errors</guid>
            <pubDate>Mon, 16 Dec 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Google released new passback tags for GPT (DFP) a while back. While these tags appear to work, they don't comply with W3C standards. E.g]]></description>
            <content:encoded><![CDATA[<p>Google released new passback tags for GPT (DFP) a while back. While these tags appear to work, they don't comply with W3C standards.&nbsp;E.g</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script src="//www.googletagservices.com/tag/js/gpt.js"&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">googletag.pubads().definePassback('/7146/adunit', [300, 250]).display();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span><br></span></code></pre></div></div>
<p>It seems you can have either src or text between the tags, not both. It generates this error:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">line 533 column 9 - Error: The text content of element script was not in the required format: Expected space, tab, newline, or slash but found g instead.  </span><br></span></code></pre></div></div>
<p>I'm unsure of a solution at the moment. I have raised this issue with our account manager, but I don't expect any fixes anytime soon.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Xalan segfault]]></title>
            <link>https://noodles.nz/2013/09/30/xalan-segfault</link>
            <guid>https://noodles.nz/2013/09/30/xalan-segfault</guid>
            <pubDate>Mon, 30 Sep 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[When using xalan-c 1.10 and the supporting package xerces-c (3.0.1) from EPEL, Xalan would segfault when transforming xml with xslt. E.g.]]></description>
            <content:encoded><![CDATA[<p>When using xalan-c 1.10 and the supporting package xerces-c (3.0.1) from EPEL, Xalan would segfault when transforming xml with xslt. E.g.</p>
<!-- -->
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@box generate]# Xalan test.xml test.xsl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Segmentation fault (core dumped)</span><br></span></code></pre></div></div>
<p>/var/log/messages didn't have any helpful information:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Sep 30 17:52:01 box kernel: Xalan[25236]: segfault at 18 ip 00007f5b44758cb9 sp 00007fffa8ff33d0 error 4 in libxalan-c.so.110.0[7f5b444d3000+3e2000]</span><br></span></code></pre></div></div>
<p>There seems to be a bug open for this at EPEL (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=807816" target="_blank" rel="noopener noreferrer">Bug&nbsp;807816</a> - Xalan-c segfaults on any input), but it has not been acknowledged or worked on.</p>
<p>I traced the problem to an incompatibility between xalan-c 1.10 and xerces-c 3.x. There is a patch as part of the EPEL xalan-c rpm which is meant to allow for this, but it seems broken as the source rpm didn't compile for me.</p>
<p>An easy fix here is to upgrade both xalan-c and xerces-c to the latest version. I hacked together rpms for these based on the work already done in EPEL:</p>
<p><a href="https://noodles.nz/downloads/xalan-c-1.11.0-1.el6.src.rpm" target="_blank" rel="noopener noreferrer">xalan-c-1.11.0-1.el6.src.rpm</a>
<a href="https://noodles.nz/downloads/xerces-c-3.1.1-1.el6.src.rpm" target="_blank" rel="noopener noreferrer">xerces-c-3.1.1-1.el6.src.rpm</a></p>
<p>After initial testing it seems that this fixes the problem and XML can now be transformed in Xalan with XSLT</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[OpenSSL 1.0.1 for RHEL/CentOS 6.x]]></title>
            <link>https://noodles.nz/2013/09/26/openssl-1-0-1-for-rhelcentos-6-x</link>
            <guid>https://noodles.nz/2013/09/26/openssl-1-0-1-for-rhelcentos-6-x</guid>
            <pubDate>Thu, 26 Sep 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[This is a great page on how to build OpenSSL 1.0.1 for RHEL/CentOS 6.x:]]></description>
            <content:encoded><![CDATA[<p>This is a great page on how to build OpenSSL 1.0.1 for RHEL/CentOS 6.x:</p>
<p><a href="https://www.ptudor.net/linux/openssl/" target="_blank" rel="noopener noreferrer">https://www.ptudor.net/linux/openssl/</a></p>
<p>This has been ported from the work done on Fedora OpenSSL (<a href="https://admin.fedoraproject.org/pkgdb/acls/name/openssl" target="_blank" rel="noopener noreferrer">https://admin.fedoraproject.org/pkgdb/acls/name/openssl</a> and <a href="http://pkgs.fedoraproject.org/cgit/openssl.git/" target="_blank" rel="noopener noreferrer">http://pkgs.fedoraproject.org/cgit/openssl.git/</a>). FIPS has been removed for ease of compiling.</p>
<p>Have been running this on our dev environment for a few days and seems to be secure. OpenSSL 1.0.1 adds TLS 1.1/1.2 (changelog here: <a href="http://www.openssl.org/news/changelog.html" target="_blank" rel="noopener noreferrer">http://www.openssl.org/news/changelog.html</a>)</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Edgecast Transact]]></title>
            <link>https://noodles.nz/2013/05/22/edgecast-transact</link>
            <guid>https://noodles.nz/2013/05/22/edgecast-transact</guid>
            <pubDate>Wed, 22 May 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[So Edgecast has announced a new product today, a separate CDN just for e-commerce sites.]]></description>
            <content:encoded><![CDATA[<p>So Edgecast has announced a new product today, a separate CDN just for e-commerce sites.</p>
<p>As <a href="https://www.telecomramblings.com/2013/05/edgecast-launches-ecommerce-acceleration-network/" target="_blank" rel="noopener noreferrer">Telecom Ramblings</a> puts it:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">The new network is based on their existing CDN technology, but built on an entirely separate network infrastructure tuned specifically for the site acceleration and transaction needs of online retail sites. In other words, it’s aimed at enterprises tired of sharing a least-common-demoninator fast lane with everything from cute cat videos to gaming updates to whatever it is kids listen to these days.  </span><br></span></code></pre></div></div>
<p>Am I the only one who reads this as a lack of confidence in their core CDN product or are they trying to differentiate themselves from other CDNs? To me a CDN should be able to handle any traffic that you throw at it and if you are getting slow downs then it's time to find a new CDN.</p>
<p>I would rather my CDN put more time and money into their core product than branching off and building a completely separate network. What's next, a sports CDN? News CDN? Porn CDN?</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Chorus Cabinet locations]]></title>
            <link>https://noodles.nz/2013/05/16/chorus-cabinet-locations</link>
            <guid>https://noodles.nz/2013/05/16/chorus-cabinet-locations</guid>
            <pubDate>Thu, 16 May 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Here are the list of the existing Chorus (previously Telecom NZ) cabinets//www.chorus.co.nz/file/3194/existingdistributioncabinetlistmay2012.xlsx]]></description>
            <content:encoded><![CDATA[<p>Here are the list of the existing Chorus (previously Telecom NZ) cabinets: <a href="http://www.chorus.co.nz/file/3194/existing_distribution_cabinet_list_may_2012.xlsx" target="_blank" rel="noopener noreferrer">http://www.chorus.co.nz/file/3194/existing_distribution_cabinet_list_may_2012.xlsx</a></p>
<p>The coordinates of the cabinets are in NZ Map Grid format and can be converted here: <a href="http://apps.linz.govt.nz/coordinate-conversion/index.aspx?IS=NZMG&amp;OS=WGS84&amp;IO=NE&amp;IC=H&amp;IH=-&amp;OO=NE&amp;OC=H&amp;OH=-&amp;PN=N&amp;IF=T&amp;ID=+&amp;OF=H&amp;OD=+&amp;CI=Y&amp;do_entry=Enter+coordinates&amp;DEBUG=&amp;ADVANCED=0" target="_blank" rel="noopener noreferrer">http://apps.linz.govt.nz/coordinate-conversion/index.aspx?IS=NZMG&amp;OS=WGS84&amp;IO=NE&amp;IC=H&amp;IH=-&amp;OO=NE&amp;OC=H&amp;OH=-&amp;PN=N&amp;IF=T&amp;ID=+&amp;OF=H&amp;OD=+&amp;CI=Y&amp;do_entry=Enter+coordinates&amp;DEBUG=&amp;ADVANCED=0</a> (with X being the Easting and Y being the Northing)</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Kraken Crawler]]></title>
            <link>https://noodles.nz/2013/03/25/kraken-crawler</link>
            <guid>https://noodles.nz/2013/03/25/kraken-crawler</guid>
            <pubDate>Mon, 25 Mar 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Recently I have seen "kraken-crawler/0.2.0" hitting my site. This is a bot used by Kontera (advertising company) to "better understand and analyze your site’s content" (according to their support staff).]]></description>
            <content:encoded><![CDATA[<p>Recently I have seen "kraken-crawler/0.2.0" hitting my site. This is a bot used by Kontera (advertising company) to "better understand and analyze your site’s content" (according to their support staff).</p>
<p>Apparently the crawler adheres to robots.txt so you can block it by adding:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">User-agent: kraken-crawler/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Disallow: /</span><br></span></code></pre></div></div>
<p>The URL to their crawler info is broken so it's hard to get an idea of what this is used for. If you are also seeing this bot, hopefully this helps you.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[s3fs/fuse on Centos/RHEL]]></title>
            <link>https://noodles.nz/2013/02/27/s3fsfuse-on-centosrhel</link>
            <guid>https://noodles.nz/2013/02/27/s3fsfuse-on-centosrhel</guid>
            <pubDate>Wed, 27 Feb 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[s3fs requires fuse 2.8.4, but on RHEL the latest version is 2.8.3, so fuse needs to be installed from source code.]]></description>
            <content:encoded><![CDATA[<p>s3fs requires fuse 2.8.4, but on RHEL the latest version is 2.8.3, so fuse needs to be installed from source code.</p>
<!-- -->
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum remove fuse fuse* fuse-devel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yum install gcc libstdc++-devel gcc-c++ curl curl* curl-devel libxml2 libxml2* libxml2-devel openssl-devel mailcap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget “https://downloads.sourceforge.net/project/fuse/fuse-2.X/2.8.4/fuse-2.8.4.tar.gz?r=&amp;ts=1299709935&amp;use_mirror=cdnetworks-us-1”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar -xzf fuse-2.8.4.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd fuse-2.8.4/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./configure –prefix=/usr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PKG_CONFIG_PATH=/usr/lib/pkgconfig:/usr/lib64/pkgconfig/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ldconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modprobe fuse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pkg-config –modversion fuse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ../</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget http://s3fs.googlecode.com/files/s3fs-1.63.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar -xzf s3fs-1.63.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd s3fs-1.63</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./configure –prefix=/usr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make install</span><br></span></code></pre></div></div>
<p>If when reinstalling s3fs you get this error:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">No package &amp;#8216;fuse' found</span><br></span></code></pre></div></div>
<p>You need to re-run this before compiling s3fs</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export PKG_CONFIG_PATH=/usr/lib/pkgconfig:/usr/lib64/pkgconfig/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ldconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modprobe fuse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pkg-config –modversion fuse</span><br></span></code></pre></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[IE10 for Windows 7 (a tale of SPOF)]]></title>
            <link>https://noodles.nz/2013/02/26/ie10-for-windows-7-a-tale-of-spof</link>
            <guid>https://noodles.nz/2013/02/26/ie10-for-windows-7-a-tale-of-spof</guid>
            <pubDate>Tue, 26 Feb 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Microsoft have finally released IE10 for Windows 7. It seems their download page is getting pretty hammered. Looking at the requests on the page it seems that everything is held up with a request to ajax.microsoft.com. The page loads the template header, but no more. Surely in the day and age a company like Microsoft would load their ajax async and prevent a single script from taking down the page.]]></description>
            <content:encoded><![CDATA[<p>Microsoft have finally released IE10 for Windows 7. It seems their download page is getting pretty hammered. Looking at the requests on the page it seems that everything is held up with a request to ajax.microsoft.com. The page loads the template header, but no more. Surely in the day and age a company like Microsoft would load their ajax async and prevent a single script from taking down the page.</p>
<p>Update: it seems this is a problem with the latest build of Firefox's Aurora. Twitter is experiencing a similar problem with one of their scripts, so there may be a problem with Firefox's script engine.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[AWS OpsWorks]]></title>
            <link>https://noodles.nz/2013/02/20/aws-opsworks</link>
            <guid>https://noodles.nz/2013/02/20/aws-opsworks</guid>
            <pubDate>Wed, 20 Feb 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Amazon have released their new application management tool OpsWorks. This uses Chef to deploy and maintain instances on AWS. While it looks neat and I'm sure it will work for startups it's not something I could trust. I still like to get my hands dirty with server deployment and I try to use bare metal rather than virtual instances where possible. Also, from what I'm reading this tool is still very much a "beta" and is quite buggy.]]></description>
            <content:encoded><![CDATA[<p>Amazon have released their new application management tool OpsWorks. This uses Chef to deploy and maintain instances on AWS. While it looks neat and I'm sure it will work for startups it's not something I could trust. I still like to get my hands dirty with server deployment and I try to use bare metal rather than virtual instances where possible. Also, from what I'm reading this tool is still very much a "beta" and is quite buggy.</p>
<p>The tool itself is not revolutionary, there are many other systems out there that do a similar thing. What is interesting though is that Amazon is offering this, once again improving the tools available without the need to use a 3rd party. Will this kill off competition or prompt the current providers to lift their game?</p>
<p>OpsWorks has brought up an interesting question. Now that AWS is using Chef and they have thousands of developers/sites using them, will Chef become the defacto standard and will other configuration management systems die out? There is a rumour that Amazon might offer Puppet support along side Chef, but that's just a rumour for now.</p>
<p>Personally I think Chef will increase in popularity due to OpsWorks, but I don't think Puppet et al will die away. Each system has their own merits and devs/ops will use whatever suits them and their environment.</p>]]></content:encoded>
        </item>
    </channel>
</rss>