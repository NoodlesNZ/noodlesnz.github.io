<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Noodles | Noodles</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://noodles.nz/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://noodles.nz/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://noodles.nz/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Noodles | Noodles"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://noodles.nz/"><link data-rh="true" rel="alternate" href="https://noodles.nz/" hreflang="en"><link data-rh="true" rel="alternate" href="https://noodles.nz/" hreflang="x-default"><script data-rh="true">function insertBanner(){var n=document.createElement("div");n.id="__docusaurus-base-url-issue-banner-container";n.innerHTML='\n<div id="__docusaurus-base-url-issue-banner" style="border: thick solid red; background-color: rgb(255, 230, 179); margin: 20px; padding: 20px; font-size: 20px;">\n   <p style="font-weight: bold; font-size: 30px;">Your Docusaurus site did not load properly.</p>\n   <p>A very common reason is a wrong site <a href="https://docusaurus.io/docs/docusaurus.config.js/#baseUrl" style="font-weight: bold;">baseUrl configuration</a>.</p>\n   <p>Current configured baseUrl = <span style="font-weight: bold; color: red;">/</span>  (default value)</p>\n   <p>We suggest trying baseUrl = <span id="__docusaurus-base-url-issue-banner-suggestion-container" style="font-weight: bold; color: green;"></span></p>\n</div>\n',document.body.prepend(n);var e=document.getElementById("__docusaurus-base-url-issue-banner-suggestion-container"),s=window.location.pathname,o="/"===s.substr(-1)?s:s+"/";e.innerHTML=o}document.addEventListener("DOMContentLoaded",(function(){void 0===window.docusaurus&&insertBanner()}))</script><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"Blog","@id":"https://noodles.nz/","mainEntityOfPage":"https://noodles.nz/","headline":"Blog","description":"Blog","blogPost":[{"@type":"BlogPosting","@id":"https://noodles.nz/2020/01/07/yarn-audit-fix","mainEntityOfPage":"https://noodles.nz/2020/01/07/yarn-audit-fix","url":"https://noodles.nz/2020/01/07/yarn-audit-fix","headline":"Yarn audit fix","name":"Yarn audit fix","description":"Yarn doesn't have the ability to fix the problems it finds in a security audit (like npm does). There is a workaround that I found on a github thread though:","datePublished":"2020-01-07T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://noodles.nz/2019/11/27/fixing-twig-deprecations-in-symfony-4-4","mainEntityOfPage":"https://noodles.nz/2019/11/27/fixing-twig-deprecations-in-symfony-4-4","url":"https://noodles.nz/2019/11/27/fixing-twig-deprecations-in-symfony-4-4","headline":"Fixing Twig deprecations in Symfony 4.4","name":"Fixing Twig deprecations in Symfony 4.4","description":"I recently update to Symfony 4.4 and had to work through a few deprecations. Some were straight forward, some were not. This Twig one was not:","datePublished":"2019-11-27T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://noodles.nz/2018/10/12/running-akamai-sandbox-in-docker-with-https","mainEntityOfPage":"https://noodles.nz/2018/10/12/running-akamai-sandbox-in-docker-with-https","url":"https://noodles.nz/2018/10/12/running-akamai-sandbox-in-docker-with-https","headline":"Running Akamai Sandbox in Docker with HTTPS","name":"Running Akamai Sandbox in Docker with HTTPS","description":"Akamai's new Sandbox can be run on local development environments, so you can test changes in development with production like CDN settings. This allows you to more quickly identify issues before rolling out to production.","datePublished":"2018-10-12T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://noodles.nz/2018/09/20/ipv6-workaround-for-unifi-usg-on-2-degrees-ufb","mainEntityOfPage":"https://noodles.nz/2018/09/20/ipv6-workaround-for-unifi-usg-on-2-degrees-ufb","url":"https://noodles.nz/2018/09/20/ipv6-workaround-for-unifi-usg-on-2-degrees-ufb","headline":"ipv6 workaround for Unifi USG on 2 Degrees UFB","name":"ipv6 workaround for Unifi USG on 2 Degrees UFB","description":"I had an issue where our USG Pro was not getting ipv6 from 2 Degrees UFB after upgrading our Controller to 5.8. After a lot of messing around with this, I found a workaround originally posted here//community.ubnt.com/t5/UniFi-Routing-Switching/USG-DHCPv6-PD-bug-when-using-PPPoE/td-p/2487710.","datePublished":"2018-09-20T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://noodles.nz/2015/07/08/speed-up-jenkins-phpcs-php-codesniffer","mainEntityOfPage":"https://noodles.nz/2015/07/08/speed-up-jenkins-phpcs-php-codesniffer","url":"https://noodles.nz/2015/07/08/speed-up-jenkins-phpcs-php-codesniffer","headline":"Speed up Jenkins phpcs (PHP CodeSniffer)","name":"Speed up Jenkins phpcs (PHP CodeSniffer)","description":"PHP CodeSniffer in our Jenkins CI was always one of the slowest tasks as it ran across our whole code base. LB Denker from Etsy wrote a good piece of software called CSRunner which looked to solve this problem by only running phpcs on files that had changed in the last 7 days (or so). It is written as a PHP script that was run from Jenkins.","datePublished":"2015-07-08T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://noodles.nz/2014/10/22/show-mysql-engine-tablespace-size","mainEntityOfPage":"https://noodles.nz/2014/10/22/show-mysql-engine-tablespace-size","url":"https://noodles.nz/2014/10/22/show-mysql-engine-tablespace-size","headline":"Show MySQL engine tablespace size","name":"Show MySQL engine tablespace size","description":"I have been trying to migrate everything in MySQL to use INNODB (death to all MyISAM), but was unsure of how much data was being stored in each storage engine. You can use the following query to give a total usage for all engines:","datePublished":"2014-10-22T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://noodles.nz/2014/10/10/speeding-up-percona-xtrabackup-restores","mainEntityOfPage":"https://noodles.nz/2014/10/10/speeding-up-percona-xtrabackup-restores","url":"https://noodles.nz/2014/10/10/speeding-up-percona-xtrabackup-restores","headline":"Speeding up percona xtrabackup restores","name":"Speeding up percona xtrabackup restores","description":"I started playing around with using xtrabackup (or more specifically innobackupex) to backup MySQL. Most of our tables are now innodb so it didn't make sense to keep dumping everything out via mysqldump.","datePublished":"2014-10-10T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://noodles.nz/2014/08/15/ssl-by-default","mainEntityOfPage":"https://noodles.nz/2014/08/15/ssl-by-default","url":"https://noodles.nz/2014/08/15/ssl-by-default","headline":"SSL by default","name":"SSL by default","description":"All the cool kids are doing it, so I'm playing around with enabling SSL by default with HSTS. Thanks to CloudFlare and StartSSL it's been mostly without a hiccup.","datePublished":"2014-08-15T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://noodles.nz/2014/03/10/validator-nu-rpm","mainEntityOfPage":"https://noodles.nz/2014/03/10/validator-nu-rpm","url":"https://noodles.nz/2014/03/10/validator-nu-rpm","headline":"Validator.nu RPM","name":"Validator.nu RPM","description":"I've been playing around with validator.nu the last few days. I have been trying to get a standalone version working so I could package it up and puppetize it. Unfortunately a lot of the standalone jar builders failed (java hell).","datePublished":"2014-03-10T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://noodles.nz/2014/01/06/ipv6-in-nz","mainEntityOfPage":"https://noodles.nz/2014/01/06/ipv6-in-nz","url":"https://noodles.nz/2014/01/06/ipv6-in-nz","headline":"IPv6 in NZ","name":"IPv6 in NZ","description":"I just a quick survey of the top 500 sites in NZ (based on Alexa data) and I was disappointed to see that only two NZ based sites (excluding Google, Microsoft, Facebook etc) supported IPv6, geekzone.co.nz and nzsale.co.nz (Geekzone implemented its IPv6 via Cloudflare and NZ Sale through Akamai).","datePublished":"2014-01-06T00:00:00.000Z","author":[],"keywords":[]}]}</script><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Noodles RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Noodles Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ac69a9b5.css">
<script src="/assets/js/runtime~main.84878a21.js" defer="defer"></script>
<script src="/assets/js/main.e22a9ee3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Nick Le Mouton</b></a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2020</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2020/01/07/yarn-audit-fix">Yarn audit fix</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2019</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2019/11/27/fixing-twig-deprecations-in-symfony-4-4">Fixing Twig deprecations in Symfony 4.4</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2018</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2018/10/12/running-akamai-sandbox-in-docker-with-https">Running Akamai Sandbox in Docker with HTTPS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2018/09/20/ipv6-workaround-for-unifi-usg-on-2-degrees-ufb">ipv6 workaround for Unifi USG on 2 Degrees UFB</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2015</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2015/07/08/speed-up-jenkins-phpcs-php-codesniffer">Speed up Jenkins phpcs (PHP CodeSniffer)</a></li></ul></div></nav></aside><main class="col col--7"><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2020/01/07/yarn-audit-fix">Yarn audit fix</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2020-01-07T00:00:00.000Z">January 7, 2020</time> · <!-- -->One min read</div></header><div class="markdown"><p>Yarn doesn&#x27;t have the ability to fix the problems it finds in a security audit (like npm does). There is a workaround that I found on a github thread though:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm audit fix --force # breaking changes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm yarn.lock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn import</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn audit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm package-lock.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It&#x27;s not pretty but it does the job.</p></div></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2019/11/27/fixing-twig-deprecations-in-symfony-4-4">Fixing Twig deprecations in Symfony 4.4</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-11-27T00:00:00.000Z">November 27, 2019</time> · <!-- -->One min read</div></header><div class="markdown"><p>I recently update to Symfony 4.4 and had to work through a few deprecations. Some were straight forward, some were not. This Twig one was not:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">The &quot;twig.exception_controller&quot; configuration key has been deprecated in Symfony 4.4, set it to &quot;null&quot; and use &quot;framework.error_controller&quot; configuration key instead.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This was resolved by adding the following to config/packages/twig.yaml:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">exception_controller: null</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2018/10/12/running-akamai-sandbox-in-docker-with-https">Running Akamai Sandbox in Docker with HTTPS</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-10-12T00:00:00.000Z">October 12, 2018</time> · <!-- -->3 min read</div></header><div class="markdown"><p>Akamai&#x27;s new Sandbox can be run on local development environments, so you can test changes in development with production like CDN settings. This allows you to more quickly identify issues before rolling out to production.</p></div><footer class="row docusaurus-mt-lg"><div class="col text--right"><a aria-label="Read more about Running Akamai Sandbox in Docker with HTTPS" href="/2018/10/12/running-akamai-sandbox-in-docker-with-https"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2018/09/20/ipv6-workaround-for-unifi-usg-on-2-degrees-ufb">ipv6 workaround for Unifi USG on 2 Degrees UFB</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-09-20T00:00:00.000Z">September 20, 2018</time> · <!-- -->2 min read</div></header><div class="markdown"><p>I had an issue where our USG Pro was not getting ipv6 from 2 Degrees UFB after upgrading our Controller to 5.8. After a lot of messing around with this, I found a workaround originally posted here: <a href="https://community.ubnt.com/t5/UniFi-Routing-Switching/USG-DHCPv6-PD-bug-when-using-PPPoE/td-p/2487710" target="_blank" rel="noopener noreferrer">https://community.ubnt.com/t5/UniFi-Routing-Switching/USG-DHCPv6-PD-bug-when-using-PPPoE/td-p/2487710</a>.</p></div><footer class="row docusaurus-mt-lg"><div class="col text--right"><a aria-label="Read more about ipv6 workaround for Unifi USG on 2 Degrees UFB" href="/2018/09/20/ipv6-workaround-for-unifi-usg-on-2-degrees-ufb"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2015/07/08/speed-up-jenkins-phpcs-php-codesniffer">Speed up Jenkins phpcs (PHP CodeSniffer)</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2015-07-08T00:00:00.000Z">July 8, 2015</time> · <!-- -->One min read</div></header><div class="markdown"><p>PHP CodeSniffer in our Jenkins CI was always one of the slowest tasks as it ran across our whole code base. LB Denker from Etsy wrote a good piece of software called <a href="https://github.com/elblinkin/CSRunner" target="_blank" rel="noopener noreferrer">CSRunner</a> which looked to solve this problem by only running phpcs on files that had changed in the last 7 days (or so). It is written as a PHP script that was run from Jenkins.</p>
<p>I took this idea and adapted it to run in Ant. Instead of looking at files changed in x days, it looks at the checkstyle report from the last run and gets a list of files with problems. It merges this with any files that have changed since the last build. In theory it should bring the run time down (assuming you have a low number of files with problems).</p>
<p><a href="https://gist.github.com/NoodlesNZ/ea5ab91c03f4dfb13ca0" target="_blank" rel="noopener noreferrer">build.xml</a></p>
<p>I&#x27;m open to any ideas on how to improve this as I&#x27;m not that experienced with Ant.</p></div></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2014/10/22/show-mysql-engine-tablespace-size">Show MySQL engine tablespace size</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2014-10-22T00:00:00.000Z">October 22, 2014</time> · <!-- -->One min read</div></header><div class="markdown"><p>I have been trying to migrate everything in MySQL to use INNODB (death to all MyISAM), but was unsure of how much data was being stored in each storage engine. You can use the following query to give a total usage for all engines:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT ENGINE, CONCAT(FORMAT(RIBPS/POWER(1024,pw),2),SUBSTR(&#x27; KMGT&#x27;,pw+1,1)) `Usage` FROM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SELECT ENGINE,RIBPS,FLOOR(LOG(RIBPS)/LOG(1024)) pw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FROM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SELECT ENGINE, SUM(data_length+index_length) RIBPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		FROM information_schema.tables AAA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		GROUP BY ENGINE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		HAVING RIBPS != 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ) AA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) A;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now I have that information I can adjust my INNODB buffers and reduce MyISAM caches</p></div></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2014/10/10/speeding-up-percona-xtrabackup-restores">Speeding up percona xtrabackup restores</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2014-10-10T00:00:00.000Z">October 10, 2014</time> · <!-- -->One min read</div></header><div class="markdown"><p>I started playing around with using xtrabackup (or more specifically innobackupex) to backup MySQL. Most of our tables are now innodb so it didn&#x27;t make sense to keep dumping everything out via mysqldump.</p>
<p>I had a clone of our master db server in our virtual environment that I was trying to restore the backup onto, but it was taking hours (using <code>innobackupex -copy-back /backup/</code>). I figured that the IO on my virtual servers was just crap and I&#x27;d have to grin and bear it. There doesn&#x27;t seem to be much around about restoring using innobackupex, even the command options are limited for restores so I thought <code>-copy-back</code> was the only way.</p>
<p>It seems that if your backup is on the same filesystem as where it&#x27;s going to end up then it&#x27;s a lot faster to use the <code>-move-back</code> option. This changed my restore time from hours to seconds.</p>
<p>e.g.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">innobackupex -move-back /backup/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2014/08/15/ssl-by-default">SSL by default</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2014-08-15T00:00:00.000Z">August 15, 2014</time> · <!-- -->One min read</div></header><div class="markdown"><p>All the cool kids are doing it, so I&#x27;m playing around with enabling SSL by default with HSTS. Thanks to CloudFlare and StartSSL it&#x27;s been mostly without a hiccup.</p></div></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2014/03/10/validator-nu-rpm">Validator.nu RPM</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2014-03-10T00:00:00.000Z">March 10, 2014</time> · <!-- -->One min read</div></header><div class="markdown"><p>I&#x27;ve been playing around with validator.nu the last few days. I have been trying to get a standalone version working so I could package it up and puppetize it. Unfortunately a lot of the standalone jar builders failed (java hell).</p>
<p>I finally found that it&#x27;s been released here: <a href="https://github.com/validator/validator.github.io" target="_blank" rel="noopener noreferrer">https://github.com/validator/validator.github.io</a></p>
<p>I whipped up a basic rpm to use this and install an init script etc: <a href="https://github.com/NoodlesNZ/validator-nu-rpm" target="_blank" rel="noopener noreferrer">https://github.com/NoodlesNZ/validator-nu-rpm</a></p></div></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2014/01/06/ipv6-in-nz">IPv6 in NZ</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2014-01-06T00:00:00.000Z">January 6, 2014</time> · <!-- -->One min read</div></header><div class="markdown"><p>I just a quick survey of the top 500 sites in NZ (based on Alexa data) and I was disappointed to see that only two NZ based sites (excluding Google, Microsoft, Facebook etc) supported IPv6, <a href="https://www.geekzone.co.nz" target="_blank" rel="noopener noreferrer">geekzone.co.nz</a> and <a href="https://www.nzsale.co.nz" target="_blank" rel="noopener noreferrer">nzsale.co.nz</a> (Geekzone implemented its IPv6 via Cloudflare and NZ Sale through Akamai).</p>
<p>Come on people, it&#x27;s 2014. There&#x27;s no excuse not to support IPv6, especially with two RIRs on their last /8 and APNIC with ~13.5 million addresses remaining. What&#x27;s really worrying is that some of the major ISPS (Telecom, Vodafone, Orcon) don&#x27;t even have IPv6 on their public facing websites. I&#x27;d guess that their residential customers won&#x27;t be seeing IPv6 on their connections anytime soon and that CGN is a real possibility.</p></div></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/page/2"><div class="pagination-nav__label">Older entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Social Media</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/nicklemouton/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://bsky.app/profile/noodles.nz" target="_blank" rel="noopener noreferrer" class="footer__link-item">BlueSky<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/NoodlesNZ" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/archive">Blog Archive</a></li></ul></div></div></div></footer></div>
</body>
</html>