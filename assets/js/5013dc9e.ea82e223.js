"use strict";(self.webpackChunknoodles=self.webpackChunknoodles||[]).push([[5569],{2541:e=>{e.exports=JSON.parse('{"permalink":"/blog/2014/10/10/speeding-up-percona-xtrabackup-restores","source":"@site/blog/2014-10-10-speeding-up-percona-xtrabackup-restores.mdx","title":"Speeding up percona xtrabackup restores","description":"I started playing around with using xtrabackup (or more specifically innobackupex) to backup MySQL. Most of our tables are now innodb so it didn\'t make sense to keep dumping everything out via mysqldump.","date":"2014-10-10T00:00:00.000Z","tags":[],"readingTime":0.77,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"Speeding up percona xtrabackup restores"},"unlisted":false,"prevItem":{"title":"Show MySQL engine tablespace size","permalink":"/blog/2014/10/22/show-mysql-engine-tablespace-size"},"nextItem":{"title":"SSL by default","permalink":"/blog/2014/08/15/ssl-by-default"}}')},6040:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>p});var o=n(2541),s=n(4848),r=n(8453);const a={title:"Speeding up percona xtrabackup restores"},i=void 0,c={authorsImageUrls:[]},p=[];function u(e){const t={code:"code",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"I started playing around with using xtrabackup (or more specifically innobackupex) to backup MySQL. Most of our tables are now innodb so it didn't make sense to keep dumping everything out via mysqldump."}),"\n",(0,s.jsxs)(t.p,{children:["I had a clone of our master db server in our virtual environment that I was trying to restore the backup onto, but it was taking hours (using ",(0,s.jsx)(t.code,{children:"innobackupex -copy-back /backup/"}),"). I figured that the IO on my virtual servers was just crap and I'd have to grin and bear it. There doesn't seem to be much around about restoring using innobackupex, even the command options are limited for restores so I thought ",(0,s.jsx)(t.code,{children:"-copy-back"})," was the only way."]}),"\n",(0,s.jsxs)(t.p,{children:["It seems that if your backup is on the same filesystem as where it's going to end up then it's a lot faster to use the ",(0,s.jsx)(t.code,{children:"-move-back"})," option. This changed my restore time from hours to seconds."]}),"\n",(0,s.jsx)(t.p,{children:"e.g."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"innobackupex -move-back /backup/\n"})})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var o=n(6540);const s={},r=o.createContext(s);function a(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);